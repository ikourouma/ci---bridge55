<!DOCTYPE html>
<html lang="en" data-country="pan-african">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Flight Search Results ‚Äî Bridge55 | Discover African Skies</title>

<!-- DEPENDENCIES -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/css/bootstrap.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/css/ion.rangeSlider.min.css">
<link href="https://fonts.googleapis.com/css2?family=Jost:wght@400;500;600;700&display=swap" rel="stylesheet">

<style>
:root {
--bs-primary: #FF6B35;
--bs-secondary: #004E89;
--bs-dark: #212529;
--bs-light: #f8f9fa;
--bs-white: #fff;
--color-default: #6c757d;
--primary: #FF6B35;
--primary-dark: #E64A19;
--secondary: #004E89;
--secondary-dark: #003366;
--gradient: linear-gradient(135deg, #FF6B35 0%, #004E89 100%);
}

/* COUNTRY THEMES */
[data-country="ci"] {
    --bs-primary: #FF8C00;
    --primary: #FF8C00;
    --primary-dark: #E67300;
    --secondary: #00954A;
    --gradient: linear-gradient(135deg, #FF8C00 0%, #00954A 100%);
}
[data-country="gh"] {
    --bs-primary: #EF3340;
    --primary: #EF3340;
    --primary-dark: #CE1126;
    --secondary: #FCD116;
    --gradient: linear-gradient(135deg, #EF3340 0%, #FCD116 50%, #006B3F 100%);
}
[data-country="ke"] {
    --bs-primary: #BB0000;
    --primary: #BB0000;
    --primary-dark: #8B0000;
    --secondary: #006600;
    --gradient: linear-gradient(135deg, #000000 0%, #BB0000 35%, #FFFFFF 50%, #006600 100%);
}
[data-country="ma"] {
    --bs-primary: #C1272D;
    --primary: #C1272D;
    --primary-dark: #A01F24;
    --secondary: #006233;
    --gradient: linear-gradient(135deg, #C1272D 0%, #006233 100%);
}
[data-country="ng"] {
    --bs-primary: #008751;
    --primary: #008751;
    --primary-dark: #006B3F;
    --secondary: #FFFFFF;
    --gradient: linear-gradient(135deg, #008751 0%, #006B3F 100%);
}
[data-country="za"] {
    --bs-primary: #007749;
    --primary: #007749;
    --primary-dark: #005C38;
    --secondary: #FFB81C;
    --gradient: linear-gradient(135deg, #007749 0%, #FFB81C 100%);
}
[data-country="ug"] {
    --bs-primary: #FCDC04;
    --primary: #D4B800;
    --primary-dark: #B39B00;
    --secondary: #000000;
    --gradient: linear-gradient(135deg, #000000 0%, #FCDC04 50%, #D90000 100%);
}
[data-country="tz"] {
    --bs-primary: #1EB53A;
    --primary: #1EB53A;
    --primary-dark: #169030;
    --secondary: #00A3DD;
    --gradient: linear-gradient(135deg, #1EB53A 0%, #00A3DD 100%);
}
[data-country="zm"] {
    --bs-primary: #198754;
    --primary: #198754;
    --primary-dark: #146C43;
    --secondary: #EF7D00;
    --gradient: linear-gradient(135deg, #198754 0%, #EF7D00 100%);
}
[data-country="rw"] {
    --bs-primary: #00A1DE;
    --primary: #00A1DE;
    --primary-dark: #0080B0;
    --secondary: #FAD201;
    --gradient: linear-gradient(135deg, #00A1DE 0%, #FAD201 100%);
}
[data-country="eg"] {
    --bs-primary: #C8102E;
    --primary: #C8102E;
    --primary-dark: #A00D24;
    --secondary: #000000;
    --gradient: linear-gradient(135deg, #C8102E 0%, #000000 100%);
}

body {
    font-family: 'Jost', sans-serif;
    background-color: #f5f5f5;
    padding-top: 70px;
}

/* TOP NAVIGATION */
.top-nav {
    background: white;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    z-index: 1000;
    height: 70px;
}
.top-nav .container {
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 100%;
}
.logo {
    font-size: 1.75rem;
    font-weight: 700;
    color: var(--primary);
    text-decoration: none;
}
.nav-actions {
    display: flex;
    align-items: center;
    gap: 1.5rem;
}
.country-selector {
    display: flex;
    gap: 0.5rem;
}
.country-btn {
    padding: 0.25rem 0.5rem;
    border: 1px solid #dee2e6;
    background: white;
    border-radius: 4px;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.2s;
}
.country-btn:hover, .country-btn.active {
    border-color: var(--primary);
    background: var(--primary);
    color: white;
}

/* BREADCRUMB */
.breadcrumb-bar {
    background: linear-gradient(135deg, rgba(255,107,53,0.1) 0%, rgba(0,78,137,0.1) 100%);
    padding: 2rem 0;
    margin-top: 70px;
}
.breadcrumb {
    background: transparent;
    margin: 0;
    padding: 0;
}
.breadcrumb-item a {
    color: var(--primary);
    text-decoration: none;
}
.breadcrumb-item.active {
    color: var(--secondary);
}

/* SEARCH CARD */
.search-card {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    padding: 1.5rem;
    margin-bottom: 2rem;
}
.trip-types {
    display: flex;
    gap: 1.5rem;
    margin-bottom: 1rem;
}
.form-check-label {
    font-weight: 500;
}

/* AIRLINES CAROUSEL - HORIZONTAL (Booking.com style) */
.airlines-showcase {
    background: white;
    border-radius: 12px;
    padding: 1.25rem;
    margin-bottom: 2rem;
    box-shadow: 0 2px 8px rgba(0,0,0,0.05);
}
.airlines-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}
.airlines-header h6 {
    margin: 0;
    font-size: 1rem;
    font-weight: 600;
}
.carousel-container {
    position: relative;
}
.carousel-arrow {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);
    background: white;
    border: 1px solid #dee2e6;
    border-radius: 50%;
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    z-index: 10;
    transition: all 0.3s;
    box-shadow: 0 2px 8px rgba(0,0,0,0.1);
}
.carousel-arrow:hover {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}
.carousel-arrow-left {
    left: -18px;
}
.carousel-arrow-right {
    right: -18px;
}
.airlines-carousel {
    display: flex;
    gap: 1rem;
    overflow-x: auto;
    scroll-behavior: smooth;
    scrollbar-width: none;
    -ms-overflow-style: none;
    padding: 0.5rem 0;
}
.airlines-carousel::-webkit-scrollbar {
    display: none;
}
.airline-item {
    flex: 0 0 auto;
    width: 90px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s;
    padding: 0.75rem;
    border-radius: 8px;
    border: 2px solid transparent;
}
.airline-item:hover {
    background: #f8f9fa;
    transform: scale(1.05);
}
.airline-item.active {
    border-color: var(--primary);
    background: rgba(255,107,53,0.05);
}
.airline-logo {
    width: 48px;
    height: 48px;
    margin: 0 auto 0.5rem;
    border-radius: 50%;
    object-fit: cover;
    background: #f8f9fa;
    border: 1px solid #e9ecef;
}
.airline-name {
    font-size: 0.75rem;
    font-weight: 600;
    color: #212529;
    margin: 0;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
.airline-count {
    font-size: 0.7rem;
    color: #6c757d;
    margin: 0;
}

/* FILTER SIDEBAR */
.filter-sidebar {
    background: white;
    border-radius: 12px;
    padding: 1.5rem;
    position: sticky;
    top: 90px;
    max-height: calc(100vh - 110px);
    overflow-y: auto;
}
.filter-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    padding-bottom: 1rem;
    border-bottom: 2px solid #e9ecef;
}
.filter-header h5 {
    margin: 0;
    font-weight: 600;
}
.reset-link {
    color: var(--primary);
    text-decoration: none;
    font-size: 0.875rem;
    cursor: pointer;
}
.reset-link:hover {
    text-decoration: underline;
}
.filter-section {
    margin-bottom: 1.5rem;
    padding-bottom: 1.5rem;
    border-bottom: 1px solid #e9ecef;
}
.filter-section:last-child {
    border-bottom: none;
}
.filter-section h6 {
    font-size: 0.95rem;
    font-weight: 600;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}
.form-check {
    margin-bottom: 0.75rem;
}
.form-check-label {
    font-size: 0.9rem;
    font-weight: 400;
    display: flex;
    justify-content: space-between;
    width: 100%;
}
.filter-count {
    color: #6c757d;
    font-size: 0.85rem;
}

/* RESULTS HEADER */
.results-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1.5rem;
    flex-wrap: wrap;
    gap: 1rem;
}
.view-toggle {
    display: flex;
    gap: 0.5rem;
}
.view-btn {
    padding: 0.5rem 1rem;
    border: 1px solid #dee2e6;
    background: white;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.2s;
    text-decoration: none;
    color: inherit;
}
.view-btn.active {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}

/* FLIGHT CARD - LIST VIEW (Compact) */
.flight-card {
    background: white;
    border-radius: 8px;
    overflow: hidden;
    margin-bottom: 1rem;
    transition: all 0.3s;
    box-shadow: 0 2px 6px rgba(0,0,0,0.05);
}
.flight-card:hover {
    box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    transform: translateY(-2px);
}
.flight-card-body {
    display: flex;
    gap: 1rem;
    padding: 1rem;
}
.flight-image {
    width: 200px;
    height: 140px;
    border-radius: 6px;
    object-fit: cover;
    flex-shrink: 0;
}
.flight-content {
    flex: 1;
    display: flex;
    flex-direction: column;
}
.flight-badges {
    display: flex;
    flex-wrap: wrap;
    gap: 0.35rem;
    margin-bottom: 0.75rem;
}
.badge-cheapest {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 0.2rem 0.6rem;
    border-radius: 12px;
    font-size: 0.7rem;
    font-weight: 600;
}
.badge-african {
    background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
    color: white;
    padding: 0.2rem 0.6rem;
    border-radius: 12px;
    font-size: 0.7rem;
    font-weight: 600;
}
.badge-direct {
    background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);
    color: white;
    padding: 0.2rem 0.6rem;
    border-radius: 12px;
    font-size: 0.7rem;
    font-weight: 600;
}
.badge-international {
    background: linear-gradient(135deg, #fa709a 0%, #fee140 100%);
    color: white;
    padding: 0.2rem 0.6rem;
    border-radius: 12px;
    font-size: 0.7rem;
    font-weight: 600;
}
.flight-timeline {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
}
.timeline-point {
    display: flex;
    flex-direction: column;
    align-items: center;
}
.timeline-time {
    font-size: 1.1rem;
    font-weight: 700;
    color: var(--bs-dark);
}
.timeline-city {
    font-size: 0.75rem;
    color: #6c757d;
}
.timeline-line {
    flex: 1;
    height: 2px;
    background: #dee2e6;
    position: relative;
}
.timeline-duration {
    position: absolute;
    top: -18px;
    left: 50%;
    transform: translateX(-50%);
    background: white;
    padding: 0 0.4rem;
    font-size: 0.75rem;
    color: #6c757d;
    white-space: nowrap;
}
.timeline-stop {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: var(--primary);
}
.flight-airline {
    display: flex;
    align-items: center;
    gap: 0.75rem;
    margin-bottom: 1rem;
}
.airline-badge {
    width: 32px;
    height: 32px;
    border-radius: 50%;
    object-fit: cover;
}
.flight-amenities {
    display: flex;
    gap: 0.75rem;
    margin-bottom: 0.75rem;
    flex-wrap: wrap;
}
.amenity-item {
    display: flex;
    align-items: center;
    gap: 0.4rem;
    color: #6c757d;
    font-size: 0.8rem;
}
.amenity-item i {
    color: var(--primary);
}
.flight-footer {
    margin-top: auto;
    padding-top: 1rem;
    border-top: 1px solid #e9ecef;
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.flight-price-section {
    display: flex;
    align-items: center;
    gap: 1.5rem;
}
.flight-price {
    font-size: 1.5rem;
    font-weight: 700;
    color: var(--primary);
}
.flight-price-label {
    font-size: 0.75rem;
    color: #6c757d;
    font-weight: 400;
}
.seats-left {
    background: #d4edda;
    color: #155724;
    padding: 0.2rem 0.6rem;
    border-radius: 12px;
    font-size: 0.75rem;
    font-weight: 500;
}
.flight-actions {
    display: flex;
    align-items: center;
    gap: 1rem;
}
.compare-checkbox {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.9rem;
}
.btn-view-details {
    background: var(--primary);
    color: white;
    border: none;
    padding: 0.6rem 1.2rem;
    border-radius: 6px;
    font-weight: 600;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.3s;
}
.btn-view-details:hover {
    background: var(--primary-dark);
    transform: scale(1.02);
}

/* NO RESULTS STATE */
.no-results {
    text-align: center;
    padding: 4rem 2rem;
    background: white;
    border-radius: 12px;
}
.no-results i {
    font-size: 4rem;
    color: #dee2e6;
    margin-bottom: 1.5rem;
}
.no-results h3 {
    font-size: 1.5rem;
    font-weight: 600;
    margin-bottom: 1rem;
}
.no-results p {
    color: #6c757d;
    margin-bottom: 2rem;
}

/* PAGINATION */
.pagination {
    margin-top: 2rem;
}
.page-link {
    color: var(--primary);
    border-color: #dee2e6;
}
.page-link:hover {
    background: var(--primary);
    color: white;
    border-color: var(--primary);
}
.page-item.active .page-link {
    background: var(--primary);
    border-color: var(--primary);
}

/* AI PROMO BANNER */
.ai-promo-banner {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border-radius: 16px;
    padding: 1.25rem 1.5rem;
    margin-bottom: 1.5rem;
    color: white;
    display: flex;
    align-items: center;
    gap: 1rem;
    position: relative;
    overflow: hidden;
}
.ai-promo-banner::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -20%;
    width: 50%;
    height: 150%;
    background: rgba(255,255,255,0.1);
    border-radius: 50%;
}
.ai-promo-icon {
    width: 50px;
    height: 50px;
    background: rgba(255,255,255,0.2);
    border-radius: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    flex-shrink: 0;
}
.ai-promo-content {
    flex: 1;
    position: relative;
    z-index: 1;
}
.ai-promo-content h4 {
    font-size: 1rem;
    font-weight: 700;
    margin-bottom: 0.25rem;
}
.ai-promo-content p {
    font-size: 0.9rem;
    margin: 0;
    opacity: 0.95;
}
.ai-promo-code {
    background: rgba(255,255,255,0.25);
    padding: 0.25rem 0.75rem;
    border-radius: 6px;
    font-weight: 700;
    font-size: 0.85rem;
    letter-spacing: 1px;
}
.ai-promo-cta {
    background: white;
    color: #667eea;
    border: none;
    padding: 0.6rem 1.25rem;
    border-radius: 8px;
    font-weight: 700;
    cursor: pointer;
    white-space: nowrap;
    transition: all 0.3s;
}
.ai-promo-cta:hover {
    transform: scale(1.05);
}
.ai-promo-close {
    position: absolute;
    top: 0.75rem;
    right: 0.75rem;
    background: rgba(255,255,255,0.2);
    border: none;
    color: white;
    width: 24px;
    height: 24px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 0.75rem;
}

/* RESPONSIVE */
@media (max-width: 992px) {
    .flight-card-body {
        flex-direction: column;
    }
    .flight-image {
        width: 100%;
        height: 220px;
    }
    .ai-promo-banner {
        flex-direction: column;
        text-align: center;
    }
}
/* HAMBURGER MENU */
.hamburger-btn { display: none; background: none; border: none; font-size: 1.5rem; cursor: pointer; padding: 0.5rem; color: #212529; }
.mobile-menu { display: none; position: fixed; top: 70px; left: 0; right: 0; background: white; box-shadow: 0 4px 12px rgba(0,0,0,0.15); z-index: 999; }
.mobile-menu a { display: block; padding: 1rem 1.5rem; color: #212529; text-decoration: none; border-bottom: 1px solid #e9ecef; font-weight: 500; }
.mobile-menu a:hover { background: #f8f9fa; color: var(--primary); }
.mobile-menu.show { display: block; }

@media (max-width: 768px) {
    .hamburger-btn { display: block; }
    .country-selector { display: none !important; }
    .airline-item {
        width: 80px;
    }
    .flight-timeline {
        font-size: 0.9rem;
    }
}
</style>
</head>
<body>

<!-- TOP NAVIGATION -->
<nav class="top-nav">
    <div class="container">
        <div style="display: flex; align-items: center; gap: 1rem;">
            <button class="hamburger-btn" onclick="toggleMobileMenu()" id="hamburgerBtn">
                <i class="fa fa-bars"></i>
            </button>
            <a href="../bridge55-search-hub-FINAL.html" class="logo">Bridge55</a>
        </div>
        <div class="nav-actions">
            <a href="../user/bookings.html" class="btn-nav" style="padding: 0.5rem 1rem; border: 2px solid #e9ecef; background: white; border-radius: 8px; font-weight: 600; text-decoration: none; color: #212529; display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; margin-right: 0.5rem;">
                <i class="fa fa-suitcase"></i> My Trips
            </a>
            <a href="../ai/concierge.html" class="btn-nav" style="padding: 0.5rem 1rem; background: linear-gradient(135deg, var(--primary) 0%, #e55a2b 100%); border-radius: 8px; font-weight: 600; text-decoration: none; color: white; display: flex; align-items: center; gap: 0.5rem; font-size: 0.85rem; margin-right: 1rem;">
                <i class="fa fa-comments"></i> Ask Dia
            </a>
            <div class="country-selector">
                <button class="country-btn active" onclick="switchCountry('pan-african')">üåç Pan-African</button>
                <button class="country-btn" onclick="switchCountry('ci')">üá®üáÆ CI</button>
                <button class="country-btn" onclick="switchCountry('gh')">üá¨üá≠ GH</button>
                <button class="country-btn" onclick="switchCountry('ke')">üá∞üá™ KE</button>
                <button class="country-btn" onclick="switchCountry('ma')">üá≤üá¶ MA</button>
            </div>
            <button class="btn btn-sm" style="background: var(--primary); color: white; border: none;">Sign In</button>
        </div>
    </div>
</nav>

<!-- MOBILE MENU -->
<div class="mobile-menu" id="mobileMenu">
    <a href="../bridge55-search-hub-FINAL.html"><i class="fa fa-home me-2"></i> Home</a>
    <a href="#"><i class="fa fa-heart me-2"></i> Saved Flights</a>
    <a href="#"><i class="fa fa-list me-2"></i> My Bookings</a>
    <a href="#"><i class="fa fa-user me-2"></i> My Account</a>
    <a href="#"><i class="fa fa-headset me-2"></i> Need Help?</a>
</div>

<!-- BREADCRUMB -->
<div class="breadcrumb-bar text-center">
    <div class="container">
        <h2 class="mb-3">‚úàÔ∏è Discover African Skies</h2>
        <nav aria-label="breadcrumb">
            <ol class="breadcrumb justify-content-center mb-0">
                <li class="breadcrumb-item"><a href="../bridge55-search-hub-FINAL.html"><i class="fa fa-home"></i> Home</a></li>
                <li class="breadcrumb-item"><a href="#">Flights</a></li>
                <li class="breadcrumb-item active">Search Results</li>
            </ol>
        </nav>
    </div>
</div>

<!-- MAIN CONTENT -->
<div class="container mt-4 mb-5">
    
    <!-- COMPACT SEARCH CARD -->
    <div class="search-card">
        <div class="trip-types">
            <div class="form-check">
                <input class="form-check-input" type="radio" name="tripType" id="oneway" checked>
                <label class="form-check-label" for="oneway">One-way</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="tripType" id="roundtrip">
                <label class="form-check-label" for="roundtrip">Round Trip</label>
            </div>
            <div class="form-check">
                <input class="form-check-input" type="radio" name="tripType" id="multicity">
                <label class="form-check-label" for="multicity">Multi-City</label>
            </div>
        </div>
        <div class="row g-3">
            <div class="col-md-2">
                <label class="form-label fw-medium">From</label>
                <input type="text" class="form-control" value="Nairobi" readonly>
            </div>
            <div class="col-md-2">
                <label class="form-label fw-medium">To</label>
                <input type="text" class="form-control" value="Accra" readonly>
            </div>
            <div class="col-md-2">
                <label class="form-label fw-medium">Departure</label>
                <input type="text" class="form-control" value="Dec 15, 2025" readonly>
            </div>
            <div class="col-md-2">
                <label class="form-label fw-medium">Return</label>
                <input type="text" class="form-control" value="Dec 22, 2025" readonly>
            </div>
            <div class="col-md-2">
                <label class="form-label fw-medium">Travelers</label>
                <input type="text" class="form-control" value="2 Adults" readonly>
            </div>
            <div class="col-md-2 d-flex align-items-end">
                <button class="btn w-100" style="background: var(--primary); color: white; font-weight: 600;">Modify Search</button>
            </div>
        </div>
    </div>

    <!-- RESULTS SECTION -->
    <div class="row">
        
        <!-- FILTER SIDEBAR (DYNAMIC) -->
        <div class="col-lg-3">
            <div class="filter-sidebar">
                <div class="filter-header">
                    <h5>Filters</h5>
                    <a onclick="resetAllFilters()" class="reset-link">Reset All</a>
                </div>

                <!-- PRICE FILTER -->
                <div class="filter-section">
                    <h6><i class="fa fa-dollar-sign text-primary me-2"></i>Price Range</h6>
                    <input type="text" class="js-range-slider" id="priceSlider" />
                    <p class="mt-2 text-muted small" id="priceRange">$100 - $1000</p>
                </div>

                <!-- STOPS FILTER -->
                <div class="filter-section">
                    <h6><i class="fa fa-map-marker-alt text-primary me-2"></i>Stops</h6>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="direct" value="Direct" onchange="applyFilters()">
                        <label class="form-check-label" for="direct">
                            <span>Direct Flights</span>
                            <span class="filter-count" id="count-direct">(0)</span>
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="onestop" value="1 stop" onchange="applyFilters()">
                        <label class="form-check-label" for="onestop">
                            <span>1 Stop</span>
                            <span class="filter-count" id="count-1stop">(0)</span>
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="twostops" value="2+ stops" onchange="applyFilters()">
                        <label class="form-check-label" for="twostops">
                            <span>2+ Stops</span>
                            <span class="filter-count" id="count-2stops">(0)</span>
                        </label>
                    </div>
                </div>

                <!-- CABIN CLASS -->
                <div class="filter-section">
                    <h6><i class="fa fa-couch text-primary me-2"></i>Cabin Class</h6>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="economy" value="Economy" onchange="applyFilters()">
                        <label class="form-check-label" for="economy">
                            <span>Economy</span>
                            <span class="filter-count" id="count-economy">(0)</span>
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="business" value="Business" onchange="applyFilters()">
                        <label class="form-check-label" for="business">
                            <span>Business</span>
                            <span class="filter-count" id="count-business">(0)</span>
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="first" value="First Class" onchange="applyFilters()">
                        <label class="form-check-label" for="first">
                            <span>First Class</span>
                            <span class="filter-count" id="count-first">(0)</span>
                        </label>
                    </div>
                </div>

                <!-- DEPARTURE TIME -->
                <div class="filter-section">
                    <h6><i class="fa fa-clock text-primary me-2"></i>Departure Time</h6>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="morning" value="morning" onchange="applyFilters()">
                        <label class="form-check-label" for="morning">
                            <span>Morning (6AM - 12PM)</span>
                            <span class="filter-count" id="count-morning">(0)</span>
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="afternoon" value="afternoon" onchange="applyFilters()">
                        <label class="form-check-label" for="afternoon">
                            <span>Afternoon (12PM - 6PM)</span>
                            <span class="filter-count" id="count-afternoon">(0)</span>
                        </label>
                    </div>
                    <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="evening" value="evening" onchange="applyFilters()">
                        <label class="form-check-label" for="evening">
                            <span>Evening (6PM - 12AM)</span>
                            <span class="filter-count" id="count-evening">(0)</span>
                        </label>
                    </div>
                </div>
            </div>
        </div>

        <!-- RESULTS AREA -->
        <div class="col-lg-9">
            <!-- AI PROMO BANNER -->
            <div class="ai-promo-banner" id="aiPromoBanner">
                <button class="ai-promo-close" onclick="closePromoBanner()"><i class="fa fa-times"></i></button>
                <div class="ai-promo-avatar" style="width: 50px; height: 50px; border-radius: 50%; overflow: hidden; flex-shrink: 0; border: 2px solid rgba(255,255,255,0.3);">
                    <img src="../assets/images/dia-avatar.png" alt="Dia" style="width: 100%; height: 100%; object-fit: cover;">
                </div>
                <div class="ai-promo-content">
                    <h4><i class="fa fa-sparkles"></i> Dia's Pick for You!</h4>
                    <p>Use code <span class="ai-promo-code" id="aiPromoCode">BRIDGE10</span> at checkout for <strong>10% off</strong> your flight booking!</p>
                </div>
                <button class="ai-promo-cta" onclick="applyPromoCode()">Apply Code</button>
            </div>

            <div class="results-header">
                <h6 class="mb-0"><strong id="resultsCount">0</strong> Flights Found</h6>
                <div class="d-flex align-items-center gap-3">
                    <div class="view-toggle">
                        <button class="view-btn active"><i class="fa fa-list"></i> List</button>
                        <a href="search-results-grid-ENHANCED.html" class="view-btn"><i class="fa fa-th"></i> Grid</a>
                    </div>
                    <select class="form-select form-select-sm" style="width: auto;" id="sortSelect" onchange="applySorting()">
                        <option value="recommended">Sort: Recommended</option>
                        <option value="price-low">Price: Low to High</option>
                        <option value="price-high">Price: High to Low</option>
                        <option value="duration">Duration: Shortest</option>
                        <option value="departure-early">Departure: Earliest</option>
                        <option value="departure-late">Departure: Latest</option>
                        <option value="best-value">Best Value</option>
                    </select>
                </div>
            </div>

            <!-- FLIGHT CARDS -->
            <div id="flightsContainer"></div>

            <!-- AIRLINES CAROUSEL - Positioned below results for better UX -->
            <div class="airlines-showcase mt-4">
                <div class="airlines-header">
                    <h6><i class="fa fa-plane text-primary me-2"></i>Filter by Airline</h6>
                    <small class="text-muted">Click to refine your search</small>
                </div>
                <div class="carousel-container">
                    <button class="carousel-arrow carousel-arrow-left" onclick="scrollCarousel(-1)">
                        <i class="fa fa-chevron-left"></i>
                    </button>
                    <div class="airlines-carousel" id="airlinesCarousel"></div>
                    <button class="carousel-arrow carousel-arrow-right" onclick="scrollCarousel(1)">
                        <i class="fa fa-chevron-right"></i>
                    </button>
                </div>
            </div>

            <!-- NO RESULTS STATE -->
            <div id="noResults" class="no-results d-none">
                <i class="fa fa-plane-slash"></i>
                <h3>No flights found</h3>
                <p>Try adjusting your filters or search criteria</p>
                <button class="btn" style="background: var(--primary); color: white;" onclick="resetAllFilters()">Reset All Filters</button>
            </div>

            <!-- PAGINATION -->
            <nav aria-label="Page navigation" id="paginationNav">
                <ul class="pagination justify-content-center">
                    <li class="page-item disabled">
                        <a class="page-link" href="#"><i class="fa fa-chevron-left"></i></a>
                    </li>
                    <li class="page-item active"><a class="page-link" href="#">1</a></li>
                    <li class="page-item"><a class="page-link" href="#">2</a></li>
                    <li class="page-item"><a class="page-link" href="#">3</a></li>
                    <li class="page-item">
                        <a class="page-link" href="#"><i class="fa fa-chevron-right"></i></a>
                    </li>
                </ul>
            </nav>
        </div>
    </div>
</div>

<!-- SCRIPTS -->
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap/5.3.2/js/bootstrap.bundle.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/ion-rangeslider/2.3.1/js/ion.rangeSlider.min.js"></script>

<script>
// ============================================
// COMPLETE WORLD-CLASS IMPLEMENTATION
// ============================================

// COUNTRY SWITCHING - Persistent across all pages
function switchCountry(country) {
    document.documentElement.setAttribute('data-country', country);
    document.querySelectorAll('.country-btn').forEach(btn => btn.classList.remove('active'));
    if (event && event.target) {
        event.target.classList.add('active');
    } else {
        document.querySelector(`[onclick*="switchCountry('${country}')"]`)?.classList.add('active');
    }
    // Save to localStorage for persistence across pages
    localStorage.setItem('bridge55-country', country);
    console.log('üåç Country switched to:', country);
}

// Apply saved country on page load
function applySavedCountry() {
    const savedCountry = localStorage.getItem('bridge55-country');
    if (savedCountry) {
        document.documentElement.setAttribute('data-country', savedCountry);
        document.querySelectorAll('.country-btn').forEach(btn => {
            btn.classList.remove('active');
            if (btn.getAttribute('onclick')?.includes(`'${savedCountry}'`)) {
                btn.classList.add('active');
            }
        });
        console.log('üåç Applied saved country:', savedCountry);
    }
}

// Initialize on DOM ready
document.addEventListener('DOMContentLoaded', applySavedCountry);

// AIRLINES DATA (12 carriers) - Using real airline logos from GitHub
// Airline logo CDN - pics.avs.io provides reliable airline logos by IATA code
// Format: https://pics.avs.io/{width}/{height}/{IATA}.png
// Using 200x200 for high-definition logos
const AIRLINE_LOGO_BASE = 'https://pics.avs.io/200/200'; // 200x200 px HD logos

const airlines = [
    { name: 'Ethiopian', fullName: 'Ethiopian Airlines', iata: 'ET', logo: `${AIRLINE_LOGO_BASE}/ET.png`, flights: 156, african: true },
    { name: 'Kenya Airways', fullName: 'Kenya Airways', iata: 'KQ', logo: `${AIRLINE_LOGO_BASE}/KQ.png`, flights: 132, african: true },
    { name: 'SAA', fullName: 'South African Airways', iata: 'SA', logo: `${AIRLINE_LOGO_BASE}/SA.png`, flights: 98, african: true },
    { name: 'Royal Air Maroc', fullName: 'Royal Air Maroc', iata: 'AT', logo: `${AIRLINE_LOGO_BASE}/AT.png`, flights: 87, african: true },
    { name: 'EgyptAir', fullName: 'EgyptAir', iata: 'MS', logo: `${AIRLINE_LOGO_BASE}/MS.png`, flights: 124, african: true },
    { name: 'RwandAir', fullName: 'RwandAir', iata: 'WB', logo: `${AIRLINE_LOGO_BASE}/WB.png`, flights: 65, african: true },
    { name: 'Air Senegal', fullName: 'Air Senegal', iata: 'HC', logo: `${AIRLINE_LOGO_BASE}/HC.png`, flights: 42, african: true },
    { name: 'Air CI', fullName: 'Air C√¥te d\'Ivoire', iata: 'HF', logo: `${AIRLINE_LOGO_BASE}/HF.png`, flights: 38, african: true },
    { name: 'Emirates', fullName: 'Emirates', iata: 'EK', logo: `${AIRLINE_LOGO_BASE}/EK.png`, flights: 215, african: false },
    { name: 'Qatar', fullName: 'Qatar Airways', iata: 'QR', logo: `${AIRLINE_LOGO_BASE}/QR.png`, flights: 198, african: false },
    { name: 'Turkish', fullName: 'Turkish Airlines', iata: 'TK', logo: `${AIRLINE_LOGO_BASE}/TK.png`, flights: 176, african: false },
    { name: 'Air France', fullName: 'Air France', iata: 'AF', logo: `${AIRLINE_LOGO_BASE}/AF.png`, flights: 145, african: false }
];

// FLIGHT DATA (African + International routes) - Using real airline logos
const allFlights = [
    // INTRA-AFRICA FLIGHTS
    { id: 1, from: 'Nairobi', fromCode: 'NBO', to: 'Accra', toCode: 'ACC', airline: 'Kenya Airways', iata: 'KQ', airlineLogo: `${AIRLINE_LOGO_BASE}/KQ.png`, departure: '08:30', arrival: '14:45', duration: '6h 15m', durationMin: 375, stops: 'Direct', cabin: 'Economy', price: 420, seats: 18, image: 'https://images.unsplash.com/photo-1436491865332-7a61a109cc05?w=200&h=140&fit=crop', badges: ['african', 'direct'], amenities: ['bags2', 'wifi', 'meals', 'entertainment'] },
    { id: 2, from: 'Addis Ababa', fromCode: 'ADD', to: 'Kigali', toCode: 'KGL', airline: 'Ethiopian Airlines', iata: 'ET', airlineLogo: `${AIRLINE_LOGO_BASE}/ET.png`, departure: '06:45', arrival: '09:15', duration: '2h 30m', durationMin: 150, stops: 'Direct', cabin: 'Economy', price: 180, seats: 32, image: 'https://images.unsplash.com/photo-1503220317375-aaad61436b1b?w=200&h=140&fit=crop', badges: ['cheapest', 'african', 'direct'], amenities: ['bags2', 'wifi', 'meals'] },
    { id: 3, from: 'Dakar', fromCode: 'DSS', to: 'Abidjan', toCode: 'ABJ', airline: 'Air Senegal', iata: 'HC', airlineLogo: `${AIRLINE_LOGO_BASE}/HC.png`, departure: '15:30', arrival: '17:45', duration: '2h 15m', durationMin: 135, stops: 'Direct', cabin: 'Economy', price: 165, seats: 14, image: 'https://images.unsplash.com/photo-1569154941061-e231b4725ef1?w=200&h=140&fit=crop', badges: ['cheapest', 'african', 'direct'], amenities: ['bags1', 'meals'] },
    { id: 4, from: 'Cape Town', fromCode: 'CPT', to: 'Nairobi', toCode: 'NBO', airline: 'Kenya Airways', iata: 'KQ', airlineLogo: `${AIRLINE_LOGO_BASE}/KQ.png`, departure: '09:00', arrival: '15:45', duration: '6h 45m', durationMin: 405, stops: 'Direct', cabin: 'Economy', price: 485, seats: 21, image: 'https://images.unsplash.com/photo-1580060839134-75a5edca2e99?w=200&h=140&fit=crop', badges: ['african', 'direct'], amenities: ['bags2', 'wifi', 'meals', 'entertainment'] },
    { id: 5, from: 'Casablanca', fromCode: 'CMN', to: 'Lagos', toCode: 'LOS', airline: 'Royal Air Maroc', iata: 'AT', airlineLogo: `${AIRLINE_LOGO_BASE}/AT.png`, departure: '11:30', arrival: '16:15', duration: '4h 45m', durationMin: 285, stops: 'Direct', cabin: 'Economy', price: 320, seats: 28, image: 'https://images.unsplash.com/photo-1539037116277-4db20889f2d4?w=200&h=140&fit=crop', badges: ['african', 'direct'], amenities: ['bags2', 'wifi', 'meals'] },
    { id: 6, from: 'Lagos', fromCode: 'LOS', to: 'Cairo', toCode: 'CAI', airline: 'EgyptAir', iata: 'MS', airlineLogo: `${AIRLINE_LOGO_BASE}/MS.png`, departure: '10:15', arrival: '18:30', duration: '8h 15m', durationMin: 495, stops: '1 stop', cabin: 'Economy', price: 380, seats: 12, image: 'https://images.unsplash.com/photo-1568322445389-f64ac2515020?w=200&h=140&fit=crop', badges: ['cheapest'], amenities: ['bags1', 'meals'] },
    
    // INTERNATIONAL TO AFRICA FLIGHTS
    { id: 7, from: 'New York', fromCode: 'JFK', to: 'Lagos', toCode: 'LOS', airline: 'Delta Air Lines', iata: 'DL', airlineLogo: `${AIRLINE_LOGO_BASE}/DL.png`, departure: '19:30', arrival: '14:20', duration: '11h 50m', durationMin: 710, stops: 'Direct', cabin: 'Economy', price: 920, seats: 15, image: 'https://images.unsplash.com/photo-1496442226666-8d4d0e62e6e9?w=200&h=140&fit=crop', badges: ['international', 'direct'], amenities: ['bags2', 'wifi', 'meals', 'entertainment'] },
    { id: 8, from: 'London', fromCode: 'LHR', to: 'Nairobi', toCode: 'NBO', airline: 'British Airways', iata: 'BA', airlineLogo: `${AIRLINE_LOGO_BASE}/BA.png`, departure: '21:00', arrival: '08:45', duration: '8h 45m', durationMin: 525, stops: 'Direct', cabin: 'Economy', price: 750, seats: 22, image: 'https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?w=200&h=140&fit=crop', badges: ['international', 'direct'], amenities: ['bags2', 'wifi', 'meals', 'entertainment'] },
    { id: 9, from: 'Paris', fromCode: 'CDG', to: 'Dakar', toCode: 'DSS', airline: 'Air France', iata: 'AF', airlineLogo: `${AIRLINE_LOGO_BASE}/AF.png`, departure: '11:15', arrival: '15:30', duration: '5h 15m', durationMin: 315, stops: 'Direct', cabin: 'Economy', price: 580, seats: 18, image: 'https://images.unsplash.com/photo-1502602898657-3e91760cbb34?w=200&h=140&fit=crop', badges: ['international', 'direct'], amenities: ['bags2', 'wifi', 'meals', 'entertainment'] },
    { id: 10, from: 'Dubai', fromCode: 'DXB', to: 'Johannesburg', toCode: 'JNB', airline: 'Emirates', iata: 'EK', airlineLogo: `${AIRLINE_LOGO_BASE}/EK.png`, departure: '03:20', arrival: '10:05', duration: '8h 45m', durationMin: 525, stops: 'Direct', cabin: 'Business', price: 1450, seats: 12, image: 'https://images.unsplash.com/photo-1512453979798-5ea266f8880c?w=200&h=140&fit=crop', badges: ['international', 'direct'], amenities: ['bags3', 'wifi', 'meals', 'entertainment', 'lounge', 'flatbed'] },
    { id: 11, from: 'Atlanta', fromCode: 'ATL', to: 'Accra', toCode: 'ACC', airline: 'Delta Air Lines', iata: 'DL', airlineLogo: `${AIRLINE_LOGO_BASE}/DL.png`, departure: '18:45', arrival: '13:20', duration: '11h 35m', durationMin: 695, stops: 'Direct', cabin: 'Economy', price: 880, seats: 20, image: 'https://images.unsplash.com/photo-1575917649705-5b59aaa12e6b?w=200&h=140&fit=crop', badges: ['international', 'direct'], amenities: ['bags2', 'wifi', 'meals', 'entertainment'] },
    { id: 12, from: 'Istanbul', fromCode: 'IST', to: 'Cairo', toCode: 'CAI', airline: 'Turkish Airlines', iata: 'TK', airlineLogo: `${AIRLINE_LOGO_BASE}/TK.png`, departure: '14:50', arrival: '16:40', duration: '2h 50m', durationMin: 170, stops: 'Direct', cabin: 'Economy', price: 340, seats: 25, image: 'https://images.unsplash.com/photo-1524231757912-21f4fe3a7200?w=200&h=140&fit=crop', badges: ['international', 'direct'], amenities: ['bags2', 'wifi', 'meals', 'entertainment'] },
    { id: 13, from: 'Brussels', fromCode: 'BRU', to: 'Kigali', toCode: 'KGL', airline: 'Brussels Airlines', iata: 'SN', airlineLogo: `${AIRLINE_LOGO_BASE}/SN.png`, departure: '17:30', arrival: '05:15', duration: '8h 45m', durationMin: 525, stops: 'Direct', cabin: 'Economy', price: 680, seats: 16, image: 'https://images.unsplash.com/photo-1559113202-c916b8e44373?w=200&h=140&fit=crop', badges: ['international', 'direct'], amenities: ['bags2', 'wifi', 'meals', 'entertainment'] },
    { id: 14, from: 'Amsterdam', fromCode: 'AMS', to: 'Nairobi', toCode: 'NBO', airline: 'KLM', iata: 'KL', airlineLogo: `${AIRLINE_LOGO_BASE}/KL.png`, departure: '22:15', arrival: '09:30', duration: '9h 15m', durationMin: 555, stops: 'Direct', cabin: 'Economy', price: 790, seats: 19, image: 'https://images.unsplash.com/photo-1534351590666-13e3e96b5017?w=200&h=140&fit=crop', badges: ['international', 'direct'], amenities: ['bags2', 'wifi', 'meals', 'entertainment'] },
    { id: 15, from: 'Doha', fromCode: 'DOH', to: 'Cape Town', toCode: 'CPT', airline: 'Qatar Airways', iata: 'QR', airlineLogo: `${AIRLINE_LOGO_BASE}/QR.png`, departure: '02:45', arrival: '13:15', duration: '10h 30m', durationMin: 630, stops: 'Direct', cabin: 'Business', price: 1280, seats: 10, image: 'https://images.unsplash.com/photo-1559628233-100c798642d4?w=200&h=140&fit=crop', badges: ['international', 'direct'], amenities: ['bags3', 'wifi', 'meals', 'entertainment', 'lounge', 'flatbed'] },
    { id: 16, from: 'Johannesburg', fromCode: 'JNB', to: 'Marrakech', toCode: 'RAK', airline: 'South African Airways', iata: 'SA', airlineLogo: `${AIRLINE_LOGO_BASE}/SA.png`, departure: '23:00', arrival: '07:30', duration: '8h 30m', durationMin: 510, stops: 'Direct', cabin: 'Business', price: 850, seats: 24, image: 'https://images.unsplash.com/photo-1489749798305-4fea3ae63d43?w=200&h=140&fit=crop', badges: ['african', 'direct'], amenities: ['bags3', 'wifi', 'meals', 'entertainment', 'lounge'] }
];

// STATE MANAGEMENT
let filteredFlights = [...allFlights];
let selectedAirlines = [];
let priceMin = 100;
let priceMax = 1500;

// RENDER AIRLINES CAROUSEL
function renderAirlines() {
    const carousel = document.getElementById('airlinesCarousel');
    carousel.innerHTML = airlines.map(airline => `
        <div class="airline-item" data-airline="${airline.fullName}" onclick="toggleAirlineFilter('${airline.fullName}')">
            <img src="${airline.logo}" alt="${airline.name}" class="airline-logo">
            <p class="airline-name">${airline.name}</p>
            <p class="airline-count">${airline.flights}</p>
        </div>
    `).join('');
}

// CAROUSEL SCROLL
function scrollCarousel(direction) {
    const carousel = document.getElementById('airlinesCarousel');
    carousel.scrollLeft += direction * 300;
}

// TOGGLE AIRLINE FILTER
function toggleAirlineFilter(airlineName) {
    const item = document.querySelector(`[data-airline="${airlineName}"]`);
    const index = selectedAirlines.indexOf(airlineName);
    
    if (index > -1) {
        selectedAirlines.splice(index, 1);
        item.classList.remove('active');
    } else {
        selectedAirlines.push(airlineName);
        item.classList.add('active');
    }
    
    applyFilters();
}

// GET TIME SLOT
function getTimeSlot(time) {
    const hour = parseInt(time.split(':')[0]);
    if (hour >= 6 && hour < 12) return 'morning';
    if (hour >= 12 && hour < 18) return 'afternoon';
    if (hour >= 18 && hour < 24) return 'evening';
    return 'night';
}

// APPLY FILTERS (DYNAMIC)
function applyFilters() {
    // Get selected filters
    const selectedStops = [];
    if (document.getElementById('direct').checked) selectedStops.push('Direct');
    if (document.getElementById('onestop').checked) selectedStops.push('1 stop');
    if (document.getElementById('twostops').checked) selectedStops.push('2+ stops');
    
    const selectedCabins = [];
    if (document.getElementById('economy').checked) selectedCabins.push('Economy');
    if (document.getElementById('business').checked) selectedCabins.push('Business');
    if (document.getElementById('first').checked) selectedCabins.push('First Class');
    
    const selectedTimes = [];
    if (document.getElementById('morning').checked) selectedTimes.push('morning');
    if (document.getElementById('afternoon').checked) selectedTimes.push('afternoon');
    if (document.getElementById('evening').checked) selectedTimes.push('evening');
    
    // Filter flights
    filteredFlights = allFlights.filter(flight => {
        // Price filter
        if (flight.price < priceMin || flight.price > priceMax) return false;
        
        // Stops filter
        if (selectedStops.length > 0 && !selectedStops.includes(flight.stops)) return false;
        
        // Airline filter
        if (selectedAirlines.length > 0 && !selectedAirlines.includes(flight.airline)) return false;
        
        // Cabin filter
        if (selectedCabins.length > 0 && !selectedCabins.includes(flight.cabin)) return false;
        
        // Time filter
        if (selectedTimes.length > 0 && !selectedTimes.includes(getTimeSlot(flight.departure))) return false;
        
        return true;
    });
    
    // Update filter counts
    updateFilterCounts();
    
    // Render results
    renderFlights();
}

// UPDATE FILTER COUNTS
function updateFilterCounts() {
    // Count flights for each filter option
    const directCount = allFlights.filter(f => f.stops === 'Direct' && f.price >= priceMin && f.price <= priceMax).length;
    const oneStopCount = allFlights.filter(f => f.stops === '1 stop' && f.price >= priceMin && f.price <= priceMax).length;
    const twoStopsCount = allFlights.filter(f => f.stops === '2+ stops' && f.price >= priceMin && f.price <= priceMax).length;
    
    const economyCount = allFlights.filter(f => f.cabin === 'Economy' && f.price >= priceMin && f.price <= priceMax).length;
    const businessCount = allFlights.filter(f => f.cabin === 'Business' && f.price >= priceMin && f.price <= priceMax).length;
    const firstCount = allFlights.filter(f => f.cabin === 'First Class' && f.price >= priceMin && f.price <= priceMax).length;
    
    const morningCount = allFlights.filter(f => getTimeSlot(f.departure) === 'morning' && f.price >= priceMin && f.price <= priceMax).length;
    const afternoonCount = allFlights.filter(f => getTimeSlot(f.departure) === 'afternoon' && f.price >= priceMin && f.price <= priceMax).length;
    const eveningCount = allFlights.filter(f => getTimeSlot(f.departure) === 'evening' && f.price >= priceMin && f.price <= priceMax).length;
    
    // Update DOM
    document.getElementById('count-direct').textContent = `(${directCount})`;
    document.getElementById('count-1stop').textContent = `(${oneStopCount})`;
    document.getElementById('count-2stops').textContent = `(${twoStopsCount})`;
    
    document.getElementById('count-economy').textContent = `(${economyCount})`;
    document.getElementById('count-business').textContent = `(${businessCount})`;
    document.getElementById('count-first').textContent = `(${firstCount})`;
    
    document.getElementById('count-morning').textContent = `(${morningCount})`;
    document.getElementById('count-afternoon').textContent = `(${afternoonCount})`;
    document.getElementById('count-evening').textContent = `(${eveningCount})`;
}

// APPLY SORTING (DYNAMIC)
function applySorting() {
    const sortOption = document.getElementById('sortSelect').value;
    
    switch(sortOption) {
        case 'price-low':
            filteredFlights.sort((a, b) => a.price - b.price);
            break;
        case 'price-high':
            filteredFlights.sort((a, b) => b.price - a.price);
            break;
        case 'duration':
            filteredFlights.sort((a, b) => a.durationMin - b.durationMin);
            break;
        case 'departure-early':
            filteredFlights.sort((a, b) => a.departure.localeCompare(b.departure));
            break;
        case 'departure-late':
            filteredFlights.sort((a, b) => b.departure.localeCompare(a.departure));
            break;
        case 'best-value':
            filteredFlights.sort((a, b) => (a.price / a.durationMin) - (b.price / b.durationMin));
            break;
        default:
            // Recommended - balance of price, duration, stops
            filteredFlights.sort((a, b) => {
                const scoreA = a.price * 0.5 + a.durationMin * 0.3 + (a.stops === 'Direct' ? 0 : 100);
                const scoreB = b.price * 0.5 + b.durationMin * 0.3 + (b.stops === 'Direct' ? 0 : 100);
                return scoreA - scoreB;
            });
    }
    
    renderFlights();
}

// RENDER FLIGHTS (Enhanced with Timeline)
function renderFlights() {
    const container = document.getElementById('flightsContainer');
    const noResults = document.getElementById('noResults');
    const pagination = document.getElementById('paginationNav');
    
    // Update count
    document.getElementById('resultsCount').textContent = filteredFlights.length;
    
    // Show/hide no results
    if (filteredFlights.length === 0) {
        container.innerHTML = '';
        noResults.classList.remove('d-none');
        pagination.classList.add('d-none');
        return;
    } else {
        noResults.classList.add('d-none');
        pagination.classList.remove('d-none');
    }
    
    // Render flight cards
    container.innerHTML = filteredFlights.map(flight => {
        const badgesHTML = flight.badges.map(badge => 
            `<span class="badge-${badge}">${
                badge === 'cheapest' ? 'üí∞ Best Price' : 
                badge === 'african' ? 'üåç African Route' : 
                badge === 'international' ? 'üåé International' :
                '‚úàÔ∏è Direct Flight'
            }</span>`
        ).join('');
        
        const amenitiesMap = {
            'bags1': '<i class="fa fa-suitcase"></i> 1 bag',
            'bags2': '<i class="fa fa-suitcase"></i> 2 bags',
            'bags3': '<i class="fa fa-suitcase"></i> 3 bags',
            'wifi': '<i class="fa fa-wifi"></i> WiFi',
            'meals': '<i class="fa fa-utensils"></i> Meals',
            'entertainment': '<i class="fa fa-tv"></i> Entertainment',
            'lounge': '<i class="fa fa-couch"></i> Lounge',
            'flatbed': '<i class="fa fa-bed"></i> Flatbed'
        };
        
        const amenitiesHTML = flight.amenities.map(a => 
            `<div class="amenity-item">${amenitiesMap[a] || a}</div>`
        ).join('');
        
        return `
            <div class="flight-card">
                <div class="flight-card-body">
                    <img src="${flight.image}" alt="${flight.from} to ${flight.to}" class="flight-image">
                    <div class="flight-content">
                        ${badgesHTML ? `<div class="flight-badges">${badgesHTML}</div>` : ''}
                        
                        <div class="flight-timeline">
                            <div class="timeline-point">
                                <div class="timeline-time">${flight.departure}</div>
                                <div class="timeline-city">${flight.fromCode}</div>
                            </div>
                            <div class="timeline-line">
                                <span class="timeline-duration">${flight.duration}</span>
                                ${flight.stops !== 'Direct' ? '<span class="timeline-stop"></span>' : ''}
                            </div>
                            <div class="timeline-point">
                                <div class="timeline-time">${flight.arrival}</div>
                                <div class="timeline-city">${flight.toCode}</div>
                            </div>
                        </div>
                        
                        <div class="flight-airline">
                            <img src="${flight.airlineLogo}" alt="${flight.airline}" class="airline-badge">
                            <span class="fw-medium">${flight.airline} ‚Ä¢ ${flight.stops} ‚Ä¢ ${flight.cabin}</span>
                        </div>
                        
                        <div class="flight-amenities">
                            ${amenitiesHTML}
                        </div>
                        
                        <div class="flight-footer">
                            <div class="flight-price-section">
                                <div>
                                    <span class="flight-price-label">From</span>
                                    <div class="flight-price">$${flight.price}</div>
                                </div>
                                <span class="seats-left">${flight.seats} seats left</span>
                            </div>
                            <div class="flight-actions">
                                <label class="compare-checkbox">
                                    <input type="checkbox" class="form-check-input">
                                    <span>Compare</span>
                                </label>
                                <button class="btn-view-details">View Details ‚Üí</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        `;
    }).join('');
}

// RESET ALL FILTERS
function resetAllFilters() {
    // Reset price slider
    if (window.priceSliderInstance) {
        window.priceSliderInstance.update({
            from: 100,
            to: 1500
        });
    }
    priceMin = 100;
    priceMax = 1500;
    
    // Uncheck all checkboxes
    document.querySelectorAll('.filter-section input[type="checkbox"]').forEach(cb => cb.checked = false);
    
    // Clear airline selections
    selectedAirlines = [];
    document.querySelectorAll('.airline-item').forEach(item => item.classList.remove('active'));
    
    // Reset sort
    document.getElementById('sortSelect').value = 'recommended';
    
    // Reapply
    applyFilters();
}

// INITIALIZE
// AI Promo Banner Functions
function closePromoBanner() {
    document.getElementById('aiPromoBanner').style.display = 'none';
    sessionStorage.setItem('flightPromoBannerClosed', 'true');
}

function applyPromoCode() {
    const code = document.getElementById('aiPromoCode').textContent;
    sessionStorage.setItem('appliedFlightPromoCode', code);
    
    // Update banner to show applied state
    const banner = document.getElementById('aiPromoBanner');
    const content = banner.querySelector('.ai-promo-content');
    content.innerHTML = `
        <h4><i class="fa fa-check-circle"></i> Code Applied!</h4>
        <p><strong>${code}</strong> will be automatically applied at checkout for <strong>10% off</strong>!</p>
    `;
    banner.style.background = 'linear-gradient(135deg, #11998e 0%, #38ef7d 100%)';
    
    // Update button
    const btn = banner.querySelector('.ai-promo-cta');
    btn.innerHTML = '<i class="fa fa-check me-1"></i> Applied';
    btn.style.background = 'rgba(255,255,255,0.3)';
    btn.disabled = true;
    btn.style.cursor = 'default';
}

function initPromoBanner() {
    if (sessionStorage.getItem('flightPromoBannerClosed') === 'true') {
        const banner = document.getElementById('aiPromoBanner');
        if (banner) banner.style.display = 'none';
    }
}

$(document).ready(function() {
    // Initialize promo banner
    initPromoBanner();
    
    // Render airlines carousel
    renderAirlines();
    
    // Initialize price slider ($100 - $4000 for consistency across platform)
    $(".js-range-slider").ionRangeSlider({
        type: "double",
        min: 100,
        max: 4000,
        from: 100,
        to: 4000,
        prefix: "$",
        step: 50,
        prettify_separator: ",",
        onFinish: function(data) {
            priceMin = data.from;
            priceMax = data.to;
            document.getElementById('priceRange').textContent = `$${data.from.toLocaleString()} - $${data.to.toLocaleString()}`;
            applyFilters();
        }
    });
    
    // Store slider instance
    window.priceSliderInstance = $("#priceSlider").data("ionRangeSlider");
    
    // Initial render
    applyFilters();
    
    // ========================================
    // NAVIGATION LOGIC
    // ========================================
    
    // Handle "View Details" button clicks (using event delegation for dynamically rendered content)
    $(document).on('click', '.btn-view-details', function(e) {
        e.preventDefault();
        console.log('‚úàÔ∏è View Details clicked!');
        
        // Get flight card data
        const flightCard = $(this).closest('.flight-card');
        const airline = flightCard.find('.airline-name').text() || 'Kenya Airways';
        const flightNumber = flightCard.find('.flight-time:first').text() || 'KQ 412';
        const price = flightCard.find('.price-amount').text() || '$450';
        
        console.log('üì¶ Flight data:', { airline, flightNumber, price });
        
        // Store flight selection in sessionStorage
        sessionStorage.setItem('selectedFlight', JSON.stringify({
            airline: airline,
            flightNumber: flightNumber,
            price: price,
            timestamp: new Date().toISOString()
        }));
        
        // Navigate to flight details page (ENHANCED version)
        console.log('üîó Navigating to: flight-details-ENHANCED.html');
        window.location.href = 'flight-details-ENHANCED.html';
    });
    
    // Handle back to search
    $('.btn-outline-primary:contains("Modify Search")').on('click', function(e) {
        e.preventDefault();
        window.location.href = '../bridge55-search-hub-FINAL.html';
    });
    
    // Handle grid view toggle
    $('.btn-outline-primary:contains("Grid View")').on('click', function(e) {
        e.preventDefault();
        window.location.href = 'search-results-grid-ENHANCED.html';
    });
    
    console.log('‚úÖ Flight Results (List) Navigation Loaded');
});

// MOBILE MENU TOGGLE
function toggleMobileMenu() {
    const menu = document.getElementById('mobileMenu');
    menu.classList.toggle('show');
}

// Close menu when clicking outside
document.addEventListener('click', function(e) {
    const menu = document.getElementById('mobileMenu');
    const hamburger = document.getElementById('hamburgerBtn');
    if (menu && hamburger && !menu.contains(e.target) && !hamburger.contains(e.target)) {
        menu.classList.remove('show');
    }
});
</script>

</body>
</html>

